- name: Configure NGINX web server
  hosts: webservers
  become: true

  tasks: 
   - name: Install NGINX
     apt: name=nginx update_cache=yes

   - name: Copy NGINX config
     copy: src=files/nginx.conf dest=/etc/nginx/sites-available/default

   - name: Enable NGINX config
     file: src=/etc/nginx/sites-available/default dest=/etc/nginx/sites-enabled/default state=link

   - name: Copy "index.html" default page
     template: src=templates/index.html.j2 dest=/usr/share/nginx/html/index.html mode=0644

   - name: Restart NGINX to apply all changes
     service: name=nginx state=restarted

